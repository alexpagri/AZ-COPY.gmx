<!--This Document is generated by GameMaker, if you edit it by hand then you do so at your own risk!-->
<object>
  <spriteName>&lt;undefined&gt;</spriteName>
  <solid>0</solid>
  <visible>-1</visible>
  <depth>0</depth>
  <persistent>0</persistent>
  <parentName>&lt;undefined&gt;</parentName>
  <maskName>&lt;undefined&gt;</maskName>
  <events>
    <event eventtype="0" enumb="0">
      <action>
        <libid>1</libid>
        <id>603</id>
        <kind>7</kind>
        <userelative>0</userelative>
        <isquestion>0</isquestion>
        <useapplyto>-1</useapplyto>
        <exetype>2</exetype>
        <functionname></functionname>
        <codestring></codestring>
        <whoName>self</whoName>
        <relative>0</relative>
        <isnot>0</isnot>
        <arguments>
          <argument>
            <kind>1</kind>
            <string>
global.grid=mp_grid_create(-grid_density/2,-grid_density/2,global.i_1_scr/grid_density+1,global.i_2_scr/grid_density+1,grid_density,grid_density);

globalvar dmode;

if(!sp){globalvar colorvect;colorvect[0]=make_colour_rgb(global.mp_color_r, global.mp_color_g, global.mp_color_b);}

dmode=0;

dmo=0;

show_debug_overlay(false);


for(i=0;i&lt;=n;i++)for(j=0;j&lt;=m;j++)
{
if(grid_walls[i,j]==2)
{
ins=instance_create(blocksize*i,blocksize*j,obj_wall);
//ins.phy_rotation=0;
ins.ht=wall_width;
ins.wd=wall_length;
with(ins)event_user(0);
mp_grid_add_instances(global.grid,ins,false);
}
if(grid_walls[i,j]==3)
{
ins=instance_create(blocksize*i,blocksize*j,obj_wall);
//ins.phy_rotation=0;
ins.wd=wall_width;
ins.ht=wall_length;
with(ins)event_user(0);
mp_grid_add_instances(global.grid,ins,false);
}
}



globalvar grid_n;
globalvar grid_m;

grid_n=global.i_1_scr/grid_density;
grid_m=global.i_2_scr/grid_density;


p=0;

while(p==0)
{
loc_n=irandom_range(1,grid_n+1);
loc_m=irandom_range(1,grid_m-1);
if(mp_grid_get_cell(global.grid,loc_n,loc_m)!=-1)
{
p=1;
pr6=instance_create(loc_n*grid_density,loc_m*grid_density,control);
if(sp)pr6.sii=c_red;
else pr6.sii=colorvect[0];
pr6.sid=0;
}
}

virpath=path_add();

globalvar totblocks;

totblocks=(grid_n-1)*(grid_m-1);

for(i=0;i&lt;=grid_n;i++)
{
grid_matrix[i,0]=0;
grid_matrix[i,grid_m]=0;
}
for(j=0;j&lt;=grid_m;j++)
{
grid_matrix[0,j]=0;
grid_matrix[grid_n,j]=0;
}



for(i=1;i&lt;grid_n;i++)for(j=1;j&lt;grid_m;j++)
{
    if (mp_grid_get_cell(global.grid,i,j)!=-1)
    {
        if (mp_grid_path(global.grid,virpath,i*grid_density,j*grid_density,loc_n*grid_density,loc_m*grid_density,false)==false)
        {
        mp_grid_add_cell(global.grid,i,j);
        totblocks--;
        grid_matrix[i,j]=0;
        }
        else
        {
        grid_matrix[i,j]=1;
        }
    }
    else
    {
    totblocks--;
    grid_matrix[i,j]=0;
    }
}
/*

ui=0;
uj=0;


for(i=1;i&lt;grid_n;i++)
{
    oki=0;
    for(j=1;j&lt;grid_m;j++)
    {
        if(grid_matrix[i,j]==1)
        {
        oki=1;
        }
        
    }
    if(oki)ui++;
}
for(i=1;i&lt;grid_m;i++)
{
    oki=0;
    for(j=1;j&lt;grid_n;j++)
    {
        if(grid_matrix[j,i]==1)
        {
        oki=1;
        }
        
    }
    if(oki)uj++;
}
okci=irandom(ui)-1;
okcj=irandom(uj)-1;
for(i=1;i&lt;grid_n;i++)
{
    oki=0;
    for(j=1;j&lt;grid_m;j++)
    {
        if(grid_matrix[i,j]==1)
        {
        oki=1;
        }
        
    }
    if(oki)okci--;
    if(okci==0)colx=i;
}
for(i=1;i&lt;grid_m;i++)
{
    oki=0;
    for(j=1;j&lt;grid_n;j++)
    {
        if(grid_matrix[j,i]==1)
        {
        oki=1;
        }
        
    }
    if(oki)okcj--;
    if(okcj==0)coly=i;
}
oki=0;
for(i=1;i&lt;grid_m;i++)
{
    
    for(j=1;j&lt;grid_n;j++)
    {
        if(grid_matrix[j,i]==1)
        {
        if(oki==0)
        {
        
        }
        oki=1;
        }
        
    }
    
}
*/
globalvar bonus_matrix;

fil1=file_text_open_write("intrare_max.txt");
file_text_write_real(fil1,grid_m-1);
file_text_writeln(fil1);
file_text_write_real(fil1,grid_n-1);
file_text_writeln(fil1);
file_text_write_real(fil1,global.tank_mindist);
file_text_writeln(fil1);
file_text_write_real(fil1,loc_m);
file_text_writeln(fil1);
file_text_write_real(fil1,loc_n);
//file_text_writeln(fil1);
//file_text_write_real(fil1,totblocks);
for(i=1;i&lt;grid_m;i++)
{
    file_text_writeln(fil1);
    for(j=1;j&lt;grid_n;j++)
    {
        if(grid_matrix[j,i]==1)
        {
        file_text_write_real(fil1,1);
        }
        else file_text_write_real(fil1,0);
        
    }
    
}

file_text_close(fil1);

if(sp)
{


rand_calc_vladeas("\\AZ_COPY\\intrare_max.txt", "\\AZ_COPY\\iesire_max.txt");
external_free("rand00m_vladeas.dll");


fil1=file_text_open_read("iesire_max.txt");
t2x=file_text_read_real(fil1);
t2y=file_text_read_real(fil1);
file_text_close(fil1);

pr6=instance_create(t2y*grid_density,t2x*grid_density,control);
        with(pr6)
        {
        key_up=vk_up;
        key_left=vk_left;
        key_down=vk_down;
        key_right=vk_right;
        key_fire=ord('M');
        sii=c_lime;
        }
pr6.sid=1;


globalvar assign_id;
assign_id=2;

}
        
        
for(i=1;i&lt;grid_m;i++)
{
    for(j=1;j&lt;grid_n;j++)
    {
        bonus_matrix[j,i]=grid_matrix[j,i];
    }
    
}

globalvar totblocks_bonus;

alarm[0]=room_speed*global.bonus_spawn;
totblocks_bonus=totblocks;
bonus_count=global.bonus_maximum;
        

        






room_persistent=1;
if(totblocks &lt; minblocks || (sp &amp;&amp; (t2y == 0 &amp;&amp; t2x == 0)))script_execute(new_map);

else {
with(v_client)event_user(0);
script_execute(stepa_init);
}



background_colour=global.bgcolor;


</string>
          </argument>
        </arguments>
      </action>
    </event>
    <event eventtype="2" enumb="3">
      <action>
        <libid>1</libid>
        <id>603</id>
        <kind>7</kind>
        <userelative>0</userelative>
        <isquestion>0</isquestion>
        <useapplyto>-1</useapplyto>
        <exetype>2</exetype>
        <functionname></functionname>
        <codestring></codestring>
        <whoName>self</whoName>
        <relative>0</relative>
        <isnot>0</isnot>
        <arguments>
          <argument>
            <kind>1</kind>
            <string>started=1;
</string>
          </argument>
        </arguments>
      </action>
    </event>
    <event eventtype="2" enumb="2">
      <action>
        <libid>1</libid>
        <id>603</id>
        <kind>7</kind>
        <userelative>0</userelative>
        <isquestion>0</isquestion>
        <useapplyto>-1</useapplyto>
        <exetype>2</exetype>
        <functionname></functionname>
        <codestring></codestring>
        <whoName>self</whoName>
        <relative>0</relative>
        <isnot>0</isnot>
        <arguments>
          <argument>
            <kind>1</kind>
            <string>script_execute(new_map);
</string>
          </argument>
        </arguments>
      </action>
    </event>
    <event eventtype="2" enumb="1">
      <action>
        <libid>1</libid>
        <id>603</id>
        <kind>7</kind>
        <userelative>0</userelative>
        <isquestion>0</isquestion>
        <useapplyto>-1</useapplyto>
        <exetype>2</exetype>
        <functionname></functionname>
        <codestring></codestring>
        <whoName>self</whoName>
        <relative>0</relative>
        <isnot>0</isnot>
        <arguments>
          <argument>
            <kind>1</kind>
            <string>with(control)
{
//score2[sid]++;
stuck=1;
block_fire=1;
}
bonus_count=0;
is_ending=1;
physics_pause_enable(true);
alarm[2]=room_speed*global.cooldown_tillend;
</string>
          </argument>
        </arguments>
      </action>
    </event>
    <event eventtype="2" enumb="0">
      <action>
        <libid>1</libid>
        <id>603</id>
        <kind>7</kind>
        <userelative>0</userelative>
        <isquestion>0</isquestion>
        <useapplyto>-1</useapplyto>
        <exetype>2</exetype>
        <functionname></functionname>
        <codestring></codestring>
        <whoName>self</whoName>
        <relative>0</relative>
        <isnot>0</isnot>
        <arguments>
          <argument>
            <kind>1</kind>
            <string>if(totblocks_bonus&gt;0 &amp;&amp; bonus_count&gt;0)
{
fil1=file_text_open_write("intrare.txt");
file_text_write_real(fil1,grid_m-1);
file_text_writeln(fil1);
file_text_write_real(fil1,grid_n-1);
file_text_writeln(fil1);
file_text_write_real(fil1,totblocks_bonus);
for(i=1;i&lt;grid_m;i++)
{
    file_text_writeln(fil1);
    for(j=1;j&lt;grid_n;j++)
    {
        if(bonus_matrix[j,i]==1)
        {
        file_text_write_real(fil1,1);
        }
        else file_text_write_real(fil1,0);
        
    }
    
}

file_text_close(fil1);


rand_calc("\\AZ_COPY\\intrare.txt", "\\AZ_COPY\\iesire.txt");


fil1=file_text_open_read("iesire.txt");
bx=file_text_read_real(fil1);
by=file_text_read_real(fil1);
file_text_close(fil1);

distxobj=instance_nearest(by*grid_density,bx*grid_density,control);

if(instance_exists(control))
{
with(distxobj)other.dist1=distance_to_point(other.by*grid_density,other.bx*grid_density);
if(dist1&gt;global.bonus_mindist)
{

pr7=instance_create(by*grid_density,bx*grid_density,bonus);
pr7.by=by;
pr7.bx=bx;

bonus_matrix[by,bx]=0;
totblocks_bonus--;
bonus_count--;
}
}
}
alarm[0]=room_speed*global.bonus_spawn;
</string>
          </argument>
        </arguments>
      </action>
    </event>
    <event eventtype="3" enumb="0">
      <action>
        <libid>1</libid>
        <id>603</id>
        <kind>7</kind>
        <userelative>0</userelative>
        <isquestion>0</isquestion>
        <useapplyto>-1</useapplyto>
        <exetype>2</exetype>
        <functionname></functionname>
        <codestring></codestring>
        <whoName>self</whoName>
        <relative>0</relative>
        <isnot>0</isnot>
        <arguments>
          <argument>
            <kind>1</kind>
            <string>if(keyboard_check_pressed(ord('G')))
{
if (dmode==0)
{
dmode=1;
}
else dmode=0;
}
if(sp &amp;&amp; keyboard_check_pressed(ord('R')))
{
file_delete("settings.ini");
}

for(yu=0;yu&lt;assign_id;yu++)////////////////inefficient
{
if(score2[yu]&lt;0)
for(yu2=0;yu2&lt;assign_id;yu2++){score2[yu2]++;}
}


if(dmode!=dmo)
{
if(dmode)show_debug_overlay(true);
else show_debug_overlay(false);
}
dmo=dmode;

if(mouse_check_button_pressed(mb_left))
{
//instance_create(mouse_x,mouse_y,bonus);
if(!instance_exists(shake) &amp;&amp; debug_mode)instance_create(0,0,shake);
}




</string>
          </argument>
        </arguments>
      </action>
    </event>
    <event eventtype="8" enumb="64">
      <action>
        <libid>1</libid>
        <id>603</id>
        <kind>7</kind>
        <userelative>0</userelative>
        <isquestion>0</isquestion>
        <useapplyto>-1</useapplyto>
        <exetype>2</exetype>
        <functionname></functionname>
        <codestring></codestring>
        <whoName>self</whoName>
        <relative>0</relative>
        <isnot>0</isnot>
        <arguments>
          <argument>
            <kind>1</kind>
            <string>if(sp)
{
draw_set_font(font0);
draw_set_colour(c_red);
draw_text(10,10,string(score2[0]));
draw_set_colour(c_black);
draw_text(40,10,"-");
draw_set_colour(c_green);
draw_text(70,10,string(score2[1]));
draw_set_colour(c_black);
if(alarm[1]/room_speed&gt;0)draw_text(140,10,string(alarm[1]/room_speed));
else draw_text(140,10,string(global.delay_tillend));
if(alarm[2]/room_speed&gt;0)draw_text(210,10,string(alarm[2]/room_speed));
else draw_text(210,10,string(global.cooldown_tillend));
}
else
{
draw_set_font(font0);
for(yu=0;yu&lt;assign_id;yu++)
{
draw_set_colour(colorvect[yu]);
draw_text(10 + yu*60,10,string(score2[yu]));
}
draw_set_colour(c_black);
for(yu=1;yu&lt;assign_id;yu++)draw_text(40 + (yu-1)*60,10,"-");
draw_set_colour(c_black);
if(alarm[1]/room_speed&gt;0)draw_text(10 + assign_id*60,10,string(alarm[1]/room_speed));
else draw_text(10 + assign_id*60,10,string(global.delay_tillend));
if(alarm[2]/room_speed&gt;0)draw_text(80 + assign_id*60,10,string(alarm[2]/room_speed));
else draw_text(80 + assign_id*60,10,string(global.cooldown_tillend));
}
</string>
          </argument>
        </arguments>
      </action>
    </event>
    <event eventtype="8" enumb="0">
      <action>
        <libid>1</libid>
        <id>603</id>
        <kind>7</kind>
        <userelative>0</userelative>
        <isquestion>0</isquestion>
        <useapplyto>-1</useapplyto>
        <exetype>2</exetype>
        <functionname></functionname>
        <codestring></codestring>
        <whoName>self</whoName>
        <relative>0</relative>
        <isnot>0</isnot>
        <arguments>
          <argument>
            <kind>1</kind>
            <string>if(dmode)
{
draw_set_alpha(0.4);
mp_grid_draw(global.grid);
draw_set_alpha(1);
flag = phy_debug_render_coms | phy_debug_render_shapes ;
physics_world_draw_debug(flag);
draw_text(20,20,string(fps));
draw_text(20,40,string(fps_real));
}
</string>
          </argument>
        </arguments>
      </action>
    </event>
    <event eventtype="9" enumb="13">
      <action>
        <libid>1</libid>
        <id>603</id>
        <kind>7</kind>
        <userelative>0</userelative>
        <isquestion>0</isquestion>
        <useapplyto>-1</useapplyto>
        <exetype>2</exetype>
        <functionname></functionname>
        <codestring></codestring>
        <whoName>self</whoName>
        <relative>0</relative>
        <isnot>0</isnot>
        <arguments>
          <argument>
            <kind>1</kind>
            <string>if(debug_mode)script_execute(new_map);
</string>
          </argument>
        </arguments>
      </action>
    </event>
  </events>
  <PhysicsObject>0</PhysicsObject>
  <PhysicsObjectSensor>0</PhysicsObjectSensor>
  <PhysicsObjectShape>0</PhysicsObjectShape>
  <PhysicsObjectDensity>0.5</PhysicsObjectDensity>
  <PhysicsObjectRestitution>0.100000001490116</PhysicsObjectRestitution>
  <PhysicsObjectGroup>0</PhysicsObjectGroup>
  <PhysicsObjectLinearDamping>0.100000001490116</PhysicsObjectLinearDamping>
  <PhysicsObjectAngularDamping>0.100000001490116</PhysicsObjectAngularDamping>
  <PhysicsObjectFriction>0.200000002980232</PhysicsObjectFriction>
  <PhysicsObjectAwake>-1</PhysicsObjectAwake>
  <PhysicsObjectKinematic>0</PhysicsObjectKinematic>
  <PhysicsShapePoints/>
</object>
